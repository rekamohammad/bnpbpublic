{"version":3,"file":"focus.js","sources":["core/media/resources/assets/js/focus.js"],"sourcesContent":["// Gets focus point coordinates from an image - adapt to suit your needs.\n\n(function ($) {\n    $(document).ready(function () {\n\n        var defaultImage;\n        var $dataAttrInput;\n        var $cssAttrInput;\n        var $focusPointContainers;\n        var $focusPointImages;\n        var $helperToolImage;\n\n        //This stores focusPoint's data-attribute values\n        var focusPointAttr = {\n            x: 0,\n            y: 0,\n            w: 0,\n            h: 0\n        };\n\n        //Initialize Helper Tool\n        (function () {\n\n            //Initialize Variables\n            defaultImage = $('#modal_set_focus_point').find('form.rv-form').data('image');\n            $dataAttrInput = $('.helper-tool-data-attr');\n            $cssAttrInput = $('.helper-tool-css3-val');\n            $helperToolImage = $('img.helper-tool-img, img.target-overlay');\n\n            //Create Grid Elements\n            for (var i = 1; i < 10; i++) {\n                $('.focuspoint-frames').append('<div class=\"focuspoint focuspoint-frame' + i + '\"><img/></div>');\n            }\n            //Store focus point containers\n            $focusPointContainers = $('.focuspoint');\n            $focusPointImages = $('.focuspoint img');\n\n            //Set the default source image\n            setImage(defaultImage);\n\n        })();\n\n        /*-----------------------------------------*/\n\n        // function setImage(<URL>)\n        // Set a new image to use in the demo, requires URI to an image\n\n        /*-----------------------------------------*/\n\n        function setImage(imgURL) {\n            //Get the dimensions of the image by referencing an image stored in memory\n            $(\"<img/>\")\n                .attr(\"src\", imgURL)\n                .load(function () {\n                    focusPointAttr.w = this.width;\n                    focusPointAttr.h = this.height;\n\n                    //Set src on the thumbnail used in the GUI\n                    $helperToolImage.attr('src', imgURL);\n\n                    //Set src on all .focuspoint images\n                    $focusPointImages.attr('src', imgURL);\n\n                    //Set up initial properties of .focuspoint containers\n\n                    /*-----------------------------------------*/\n                    // Note ---\n                    // Setting these up with attr doesn't really make a difference\n                    // added to demo only so changes are made visually in the dom\n                    // for users inspecting it. Because of how FocusPoint uses .data()\n                    // only the .data() assignments that follow are necessary.\n                    /*-----------------------------------------*/\n                    $focusPointContainers.attr({\n                        'data-focus-x': focusPointAttr.x,\n                        'data-focus-y': focusPointAttr.y,\n                        'data-image-w': focusPointAttr.w,\n                        'data-image-h': focusPointAttr.h\n                    });\n\n                    /*-----------------------------------------*/\n                    // These assignments using .data() are what counts.\n                    /*-----------------------------------------*/\n                    $focusPointContainers.data('focusX', focusPointAttr.x);\n                    $focusPointContainers.data('focusY', focusPointAttr.y);\n                    $focusPointContainers.data('imageW', focusPointAttr.w);\n                    $focusPointContainers.data('imageH', focusPointAttr.h);\n\n                    //Run FocusPoint for the first time.\n                    $('.focuspoint').focusPoint();\n\n                });\n        }\n\n        /*-----------------------------------------*/\n\n        // Update the data attributes shown to the user\n\n        /*-----------------------------------------*/\n\n        function printDataAttr() {\n            $dataAttrInput.val('data-focus-x=\"' + focusPointAttr.x.toFixed(2) + '\" data-focus-y=\"' + focusPointAttr.y.toFixed(2) + '\" data-image-w=\"' + focusPointAttr.w + '\" data-image-h=\"' + focusPointAttr.h + '\"');\n        }\n\n        /*-----------------------------------------*/\n\n        // Bind to helper image click event\n        // Adjust focus on Click / provides focuspoint and CSS3 properties\n\n        /*-----------------------------------------*/\n\n        $helperToolImage.click(function (e) {\n\n            var imageW = $(this).width();\n            var imageH = $(this).height();\n\n            //Calculate FocusPoint coordinates\n            var offsetX = e.pageX - $(this).offset().left;\n            var offsetY = e.pageY - $(this).offset().top;\n            var focusX = (offsetX / imageW - .5) * 2;\n            var focusY = (offsetY / imageH - .5) * -2;\n            focusPointAttr.x = focusX;\n            focusPointAttr.y = focusY;\n\n            //Write values to input\n            printDataAttr();\n\n            //Update focus point\n            updateFocusPoint();\n\n            //Calculate CSS Percentages\n            var percentageX = (offsetX / imageW) * 100;\n            var percentageY = (offsetY / imageH) * 100;\n            var backgroundPosition = percentageX.toFixed(0) + '% ' + percentageY.toFixed(0) + '%';\n            var backgroundPositionCSS = 'background-position: ' + backgroundPosition + ';';\n            $cssAttrInput.val(backgroundPositionCSS);\n\n            //Leave a sweet target reticle at the focus point.\n            $('.reticle').css({\n                'top': percentageY + '%',\n                'left': percentageX + '%'\n            });\n\n            $('.helper-tool-reticle-css').val('top: ' + percentageY + '%; left: ' + percentageX + '%');\n        });\n\n        /*-----------------------------------------*/\n\n        // Change image on paste/blur\n        // When you paste an image into the specified input, it will be used for the demo\n\n        /*-----------------------------------------*/\n\n        $('#modal_set_focus_point').on('shown.bs.modal', function (e) {\n            setImage($('#modal_set_focus_point').find('form.rv-form').data('image'));\n        });\n\n        /*-----------------------------------------*/\n\n        /* Update Helper */\n        // This function is used to update the focuspoint\n\n        /*-----------------------------------------*/\n\n        function updateFocusPoint() {\n            /*-----------------------------------------*/\n            // See note in setImage() function regarding these attribute assignments.\n            //TLDR - You don't need them for this to work.\n            /*-----------------------------------------*/\n            $focusPointContainers.attr({\n                'data-focus-x': focusPointAttr.x,\n                'data-focus-y': focusPointAttr.y\n            });\n            /*-----------------------------------------*/\n            // These you DO need :)\n            /*-----------------------------------------*/\n            $focusPointContainers.data('focusX', focusPointAttr.x);\n            $focusPointContainers.data('focusY', focusPointAttr.y);\n            $focusPointContainers.adjustFocus();\n        }\n    });\n}(jQuery));"],"names":[],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIkQ6L1Byb2plY3QvYm5wYl9wcm9kL2NvcmUvbWVkaWEvcmVzb3VyY2VzL2Fzc2V0cy9qcy9mb2N1cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZXRzIGZvY3VzIHBvaW50IGNvb3JkaW5hdGVzIGZyb20gYW4gaW1hZ2UgLSBhZGFwdCB0byBzdWl0IHlvdXIgbmVlZHMuXG5cbihmdW5jdGlvbiAoJCkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZGVmYXVsdEltYWdlO1xuICAgICAgICB2YXIgJGRhdGFBdHRySW5wdXQ7XG4gICAgICAgIHZhciAkY3NzQXR0cklucHV0O1xuICAgICAgICB2YXIgJGZvY3VzUG9pbnRDb250YWluZXJzO1xuICAgICAgICB2YXIgJGZvY3VzUG9pbnRJbWFnZXM7XG4gICAgICAgIHZhciAkaGVscGVyVG9vbEltYWdlO1xuXG4gICAgICAgIC8vVGhpcyBzdG9yZXMgZm9jdXNQb2ludCdzIGRhdGEtYXR0cmlidXRlIHZhbHVlc1xuICAgICAgICB2YXIgZm9jdXNQb2ludEF0dHIgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHc6IDAsXG4gICAgICAgICAgICBoOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgLy9Jbml0aWFsaXplIEhlbHBlciBUb29sXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vSW5pdGlhbGl6ZSBWYXJpYWJsZXNcbiAgICAgICAgICAgIGRlZmF1bHRJbWFnZSA9ICQoJyNtb2RhbF9zZXRfZm9jdXNfcG9pbnQnKS5maW5kKCdmb3JtLnJ2LWZvcm0nKS5kYXRhKCdpbWFnZScpO1xuICAgICAgICAgICAgJGRhdGFBdHRySW5wdXQgPSAkKCcuaGVscGVyLXRvb2wtZGF0YS1hdHRyJyk7XG4gICAgICAgICAgICAkY3NzQXR0cklucHV0ID0gJCgnLmhlbHBlci10b29sLWNzczMtdmFsJyk7XG4gICAgICAgICAgICAkaGVscGVyVG9vbEltYWdlID0gJCgnaW1nLmhlbHBlci10b29sLWltZywgaW1nLnRhcmdldC1vdmVybGF5Jyk7XG5cbiAgICAgICAgICAgIC8vQ3JlYXRlIEdyaWQgRWxlbWVudHNcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMTA7IGkrKykge1xuICAgICAgICAgICAgICAgICQoJy5mb2N1c3BvaW50LWZyYW1lcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvY3VzcG9pbnQgZm9jdXNwb2ludC1mcmFtZScgKyBpICsgJ1wiPjxpbWcvPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9TdG9yZSBmb2N1cyBwb2ludCBjb250YWluZXJzXG4gICAgICAgICAgICAkZm9jdXNQb2ludENvbnRhaW5lcnMgPSAkKCcuZm9jdXNwb2ludCcpO1xuICAgICAgICAgICAgJGZvY3VzUG9pbnRJbWFnZXMgPSAkKCcuZm9jdXNwb2ludCBpbWcnKTtcblxuICAgICAgICAgICAgLy9TZXQgdGhlIGRlZmF1bHQgc291cmNlIGltYWdlXG4gICAgICAgICAgICBzZXRJbWFnZShkZWZhdWx0SW1hZ2UpO1xuXG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgICAgLy8gZnVuY3Rpb24gc2V0SW1hZ2UoPFVSTD4pXG4gICAgICAgIC8vIFNldCBhIG5ldyBpbWFnZSB0byB1c2UgaW4gdGhlIGRlbW8sIHJlcXVpcmVzIFVSSSB0byBhbiBpbWFnZVxuXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIGZ1bmN0aW9uIHNldEltYWdlKGltZ1VSTCkge1xuICAgICAgICAgICAgLy9HZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGltYWdlIGJ5IHJlZmVyZW5jaW5nIGFuIGltYWdlIHN0b3JlZCBpbiBtZW1vcnlcbiAgICAgICAgICAgICQoXCI8aW1nLz5cIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInNyY1wiLCBpbWdVUkwpXG4gICAgICAgICAgICAgICAgLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c1BvaW50QXR0ci53ID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNQb2ludEF0dHIuaCA9IHRoaXMuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vU2V0IHNyYyBvbiB0aGUgdGh1bWJuYWlsIHVzZWQgaW4gdGhlIEdVSVxuICAgICAgICAgICAgICAgICAgICAkaGVscGVyVG9vbEltYWdlLmF0dHIoJ3NyYycsIGltZ1VSTCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9TZXQgc3JjIG9uIGFsbCAuZm9jdXNwb2ludCBpbWFnZXNcbiAgICAgICAgICAgICAgICAgICAgJGZvY3VzUG9pbnRJbWFnZXMuYXR0cignc3JjJywgaW1nVVJMKTtcblxuICAgICAgICAgICAgICAgICAgICAvL1NldCB1cCBpbml0aWFsIHByb3BlcnRpZXMgb2YgLmZvY3VzcG9pbnQgY29udGFpbmVyc1xuXG4gICAgICAgICAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIC0tLVxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIHRoZXNlIHVwIHdpdGggYXR0ciBkb2Vzbid0IHJlYWxseSBtYWtlIGEgZGlmZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyBhZGRlZCB0byBkZW1vIG9ubHkgc28gY2hhbmdlcyBhcmUgbWFkZSB2aXN1YWxseSBpbiB0aGUgZG9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1c2VycyBpbnNwZWN0aW5nIGl0LiBCZWNhdXNlIG9mIGhvdyBGb2N1c1BvaW50IHVzZXMgLmRhdGEoKVxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHRoZSAuZGF0YSgpIGFzc2lnbm1lbnRzIHRoYXQgZm9sbG93IGFyZSBuZWNlc3NhcnkuXG4gICAgICAgICAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICAgICAgICAgICAgICAgICAkZm9jdXNQb2ludENvbnRhaW5lcnMuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1mb2N1cy14JzogZm9jdXNQb2ludEF0dHIueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLWZvY3VzLXknOiBmb2N1c1BvaW50QXR0ci55LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtaW1hZ2Utdyc6IGZvY3VzUG9pbnRBdHRyLncsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1pbWFnZS1oJzogZm9jdXNQb2ludEF0dHIuaFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgYXNzaWdubWVudHMgdXNpbmcgLmRhdGEoKSBhcmUgd2hhdCBjb3VudHMuXG4gICAgICAgICAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgICAgICAgICAgICAgICAgICAkZm9jdXNQb2ludENvbnRhaW5lcnMuZGF0YSgnZm9jdXNYJywgZm9jdXNQb2ludEF0dHIueCk7XG4gICAgICAgICAgICAgICAgICAgICRmb2N1c1BvaW50Q29udGFpbmVycy5kYXRhKCdmb2N1c1knLCBmb2N1c1BvaW50QXR0ci55KTtcbiAgICAgICAgICAgICAgICAgICAgJGZvY3VzUG9pbnRDb250YWluZXJzLmRhdGEoJ2ltYWdlVycsIGZvY3VzUG9pbnRBdHRyLncpO1xuICAgICAgICAgICAgICAgICAgICAkZm9jdXNQb2ludENvbnRhaW5lcnMuZGF0YSgnaW1hZ2VIJywgZm9jdXNQb2ludEF0dHIuaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9SdW4gRm9jdXNQb2ludCBmb3IgdGhlIGZpcnN0IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICQoJy5mb2N1c3BvaW50JykuZm9jdXNQb2ludCgpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGRhdGEgYXR0cmlidXRlcyBzaG93biB0byB0aGUgdXNlclxuXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIGZ1bmN0aW9uIHByaW50RGF0YUF0dHIoKSB7XG4gICAgICAgICAgICAkZGF0YUF0dHJJbnB1dC52YWwoJ2RhdGEtZm9jdXMteD1cIicgKyBmb2N1c1BvaW50QXR0ci54LnRvRml4ZWQoMikgKyAnXCIgZGF0YS1mb2N1cy15PVwiJyArIGZvY3VzUG9pbnRBdHRyLnkudG9GaXhlZCgyKSArICdcIiBkYXRhLWltYWdlLXc9XCInICsgZm9jdXNQb2ludEF0dHIudyArICdcIiBkYXRhLWltYWdlLWg9XCInICsgZm9jdXNQb2ludEF0dHIuaCArICdcIicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgICAgLy8gQmluZCB0byBoZWxwZXIgaW1hZ2UgY2xpY2sgZXZlbnRcbiAgICAgICAgLy8gQWRqdXN0IGZvY3VzIG9uIENsaWNrIC8gcHJvdmlkZXMgZm9jdXNwb2ludCBhbmQgQ1NTMyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgICAgJGhlbHBlclRvb2xJbWFnZS5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICB2YXIgaW1hZ2VXID0gJCh0aGlzKS53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGltYWdlSCA9ICQodGhpcykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIC8vQ2FsY3VsYXRlIEZvY3VzUG9pbnQgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgIHZhciBvZmZzZXRYID0gZS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRZID0gZS5wYWdlWSAtICQodGhpcykub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgdmFyIGZvY3VzWCA9IChvZmZzZXRYIC8gaW1hZ2VXIC0gLjUpICogMjtcbiAgICAgICAgICAgIHZhciBmb2N1c1kgPSAob2Zmc2V0WSAvIGltYWdlSCAtIC41KSAqIC0yO1xuICAgICAgICAgICAgZm9jdXNQb2ludEF0dHIueCA9IGZvY3VzWDtcbiAgICAgICAgICAgIGZvY3VzUG9pbnRBdHRyLnkgPSBmb2N1c1k7XG5cbiAgICAgICAgICAgIC8vV3JpdGUgdmFsdWVzIHRvIGlucHV0XG4gICAgICAgICAgICBwcmludERhdGFBdHRyKCk7XG5cbiAgICAgICAgICAgIC8vVXBkYXRlIGZvY3VzIHBvaW50XG4gICAgICAgICAgICB1cGRhdGVGb2N1c1BvaW50KCk7XG5cbiAgICAgICAgICAgIC8vQ2FsY3VsYXRlIENTUyBQZXJjZW50YWdlc1xuICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2VYID0gKG9mZnNldFggLyBpbWFnZVcpICogMTAwO1xuICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2VZID0gKG9mZnNldFkgLyBpbWFnZUgpICogMTAwO1xuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRQb3NpdGlvbiA9IHBlcmNlbnRhZ2VYLnRvRml4ZWQoMCkgKyAnJSAnICsgcGVyY2VudGFnZVkudG9GaXhlZCgwKSArICclJztcbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kUG9zaXRpb25DU1MgPSAnYmFja2dyb3VuZC1wb3NpdGlvbjogJyArIGJhY2tncm91bmRQb3NpdGlvbiArICc7JztcbiAgICAgICAgICAgICRjc3NBdHRySW5wdXQudmFsKGJhY2tncm91bmRQb3NpdGlvbkNTUyk7XG5cbiAgICAgICAgICAgIC8vTGVhdmUgYSBzd2VldCB0YXJnZXQgcmV0aWNsZSBhdCB0aGUgZm9jdXMgcG9pbnQuXG4gICAgICAgICAgICAkKCcucmV0aWNsZScpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3RvcCc6IHBlcmNlbnRhZ2VZICsgJyUnLFxuICAgICAgICAgICAgICAgICdsZWZ0JzogcGVyY2VudGFnZVggKyAnJSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcuaGVscGVyLXRvb2wtcmV0aWNsZS1jc3MnKS52YWwoJ3RvcDogJyArIHBlcmNlbnRhZ2VZICsgJyU7IGxlZnQ6ICcgKyBwZXJjZW50YWdlWCArICclJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIC8vIENoYW5nZSBpbWFnZSBvbiBwYXN0ZS9ibHVyXG4gICAgICAgIC8vIFdoZW4geW91IHBhc3RlIGFuIGltYWdlIGludG8gdGhlIHNwZWNpZmllZCBpbnB1dCwgaXQgd2lsbCBiZSB1c2VkIGZvciB0aGUgZGVtb1xuXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgICQoJyNtb2RhbF9zZXRfZm9jdXNfcG9pbnQnKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2V0SW1hZ2UoJCgnI21vZGFsX3NldF9mb2N1c19wb2ludCcpLmZpbmQoJ2Zvcm0ucnYtZm9ybScpLmRhdGEoJ2ltYWdlJykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgICAvKiBVcGRhdGUgSGVscGVyICovXG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byB1cGRhdGUgdGhlIGZvY3VzcG9pbnRcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGb2N1c1BvaW50KCkge1xuICAgICAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgICAgICAgICAvLyBTZWUgbm90ZSBpbiBzZXRJbWFnZSgpIGZ1bmN0aW9uIHJlZ2FyZGluZyB0aGVzZSBhdHRyaWJ1dGUgYXNzaWdubWVudHMuXG4gICAgICAgICAgICAvL1RMRFIgLSBZb3UgZG9uJ3QgbmVlZCB0aGVtIGZvciB0aGlzIHRvIHdvcmsuXG4gICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgICAgICRmb2N1c1BvaW50Q29udGFpbmVycy5hdHRyKHtcbiAgICAgICAgICAgICAgICAnZGF0YS1mb2N1cy14JzogZm9jdXNQb2ludEF0dHIueCxcbiAgICAgICAgICAgICAgICAnZGF0YS1mb2N1cy15JzogZm9jdXNQb2ludEF0dHIueVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgICAgIC8vIFRoZXNlIHlvdSBETyBuZWVkIDopXG4gICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgICAgICRmb2N1c1BvaW50Q29udGFpbmVycy5kYXRhKCdmb2N1c1gnLCBmb2N1c1BvaW50QXR0ci54KTtcbiAgICAgICAgICAgICRmb2N1c1BvaW50Q29udGFpbmVycy5kYXRhKCdmb2N1c1knLCBmb2N1c1BvaW50QXR0ci55KTtcbiAgICAgICAgICAgICRmb2N1c1BvaW50Q29udGFpbmVycy5hZGp1c3RGb2N1cygpO1xuICAgICAgICB9XG4gICAgfSk7XG59KGpRdWVyeSkpOyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTs7QUFFQSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0lBQ1YsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZOztRQUUxQixJQUFJLFlBQVksQ0FBQztRQUNqQixJQUFJLGNBQWMsQ0FBQztRQUNuQixJQUFJLGFBQWEsQ0FBQztRQUNsQixJQUFJLHFCQUFxQixDQUFDO1FBQzFCLElBQUksaUJBQWlCLENBQUM7UUFDdEIsSUFBSSxnQkFBZ0IsQ0FBQzs7O1FBR3JCLElBQUksY0FBYyxHQUFHO1lBQ2pCLENBQUMsRUFBRSxDQUFDO1lBQ0osQ0FBQyxFQUFFLENBQUM7WUFDSixDQUFDLEVBQUUsQ0FBQztZQUNKLENBQUMsRUFBRSxDQUFDO1NBQ1AsQ0FBQzs7O1FBR0YsQ0FBQyxZQUFZOzs7WUFHVCxZQUFZLEdBQUcsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM5RSxjQUFjLEdBQUcsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUM7WUFDN0MsYUFBYSxHQUFHLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1lBQzNDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDOzs7WUFHaEUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDekIsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsTUFBTSxDQUFDLHlDQUF5QyxHQUFHLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDO2FBQ3BHOztZQUVE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"}